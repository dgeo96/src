echo "/etc/rc processing ..."
mount -t proc proc /proc
echo 2 >/proc/cpu/alignment
echo "Starting watchdog ..."
watchdog /dev/watchdog
hostname SG710
echo "Mounting Filesystems ..."
mount -t sysfs none /sys
mount -t devpts devpts /dev/pts
mount -t tmpfs -o size=33m tmpfs /var
if ! mount -t ext3 /dev/flash/config /etc/config
then
	mke2fs -j /dev/flash/config
	if ! mount -t ext3 /dev/flash/config /etc/config
	then
		mount -t tmpfs -o size=2048k tmpfs /etc/config
	fi
fi
[ -d /etc/config/persistent ] || mkdir /etc/config/persistent
mkdir -m 1777 /var/tmp
mkdir -m 755 /var/log
mkdir -m 755 /var/run
mkdir -m 1777 /var/lock
mkdir -m 755 /var/empty
mkdir -m 755 /var/mnt
echo "Setting system clock ..."
hwclock --hctosys --utc
echo "Processing Config Filesystem ..."
flatfsd -r 
echo "Loading network drivers."
modprobe 8139cp
ip link set eth0 name tmp
ip link set eth1 name eth0
ip link set tmp name eth1
modprobe ixp400
cat /etc/IxNpeMicrocode.dat >/dev/ixNpe
modprobe ixp400_eth
modprobe e1000
setmac -p
echo 1 >/proc/sys/net/ipv4/conf/all/promote_secondaries
echo "Loading crypto drivers."
modprobe ocf
modprobe ixp4xx
modprobe cryptodev
modprobe ipsec
ifconfig lo 127.0.0.1
echo "/etc/rc complete."
